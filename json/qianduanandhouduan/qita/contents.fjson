{
    "body": "<section id=\"id1\">\n<h1>\u5176\u4ed6<a class=\"headerlink\" href=\"#id1\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h1>\n<section id=\"github-action\">\n<h2>Github Action<a class=\"headerlink\" href=\"#github-action\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h2>\n<section id=\"sphinx\">\n<h3>\u4e00\u3001sphinx\u7684\u81ea\u52a8\u6784\u5efa<a class=\"headerlink\" href=\"#sphinx\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h3>\n<section id=\"id2\">\n<h4>1. \u4e00\u4e9b\u8bf4\u660e<a class=\"headerlink\" href=\"#id2\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>\u200b\t\t\u60f3\u627e\u4e2a\u5730\u65b9\u8bb0\u5f55\u4e00\u4e0b\uff0c\u770b\u5230\u8bb8\u591apython\u9879\u76ee\u7684\u6587\u6863\u662f\u7528sphinx\u5199\u7684\uff0c\u7528\u4e00\u4e9b\u5e73\u53f0\u6258\u7ba1\u81ea\u5df1\u7684\u6587\u6863\u611f\u89c9\u4e0d\u592a\u81ea\u7531\uff0c\u4e8e\u662f\u6253\u7b97\u81ea\u5df1\u642d\u5efa\u4e00\u4e2a\u3002\u7531\u4e8esphinx\u6784\u5efa\u751f\u6210\u7684\u90fd\u662f\u9759\u6001\u9875\u9762\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528Github Pages\u6258\u7ba1\u3002</p>\n<p>\u200b\t\t\u5982\u679c\u6bcf\u6b21\u90fd\u5728\u672c\u5730\u4fee\u6539\u9879\u76ee\u6e90\u7801\uff0c\u7136\u540e\u672c\u5730\u6784\u5efa\uff0c\u518d\u5c06\u6e90\u4ee3\u7801\u4e0a\u4f20\u81f3Github\u5907\u4efd\uff0c\u9759\u6001\u9875\u9762\u90e8\u7f72\u81f3Github Pages\uff0c\u4e0d\u514d\u89c9\u5f97\u6709\u4e9b\u9ebb\u70e6\uff0c\u5076\u7136\u95f4\u53d1\u73b0\u4e86Github Action\u529f\u80fd\uff08~~\u8fd9\u4e0d\u662f\u76f4\u63a5\u767d\u5ad6\u670d\u52a1\u5668\u5417~~\uff09\uff0c\u4f7f\u7528Github Action\u8fdb\u884c\u6784\u5efa\u548c\u90e8\u7f72\uff0c\u8fd9\u6837\u6211\u53ea\u9700\u8981\u5c06\u521d\u59cb\u6e90\u4ee3\u7801\u4e0a\u4f20\u81f3Github\uff0c\u7136\u540e\u60f3\u8981\u4fee\u6539\u6216\u5199\u6587\u7ae0\u7684\u65f6\u5019\u76f4\u63a5\u5728Github\u4e0a\u6539\u3002\u7136\u540e\u5168\u81ea\u52a8\u66f4\u65b0Github Pages\uff0c\u5e76\u4e14\u53ef\u4ee5\u968f\u65f6\u56de\u6eda\u7248\u672c\u3002</p>\n</section>\n<section id=\"id3\">\n<h4>2. \u4e00\u4e9b\u5751<a class=\"headerlink\" href=\"#id3\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>\u200b\t\t\u2460 \u5728Github Marketplace\u4e0a\u641c\u5230\u7684sphinx\u81ea\u52a8\u6784\u5efa\u7684Acition\u5927\u591a\u90fd\u4e0d\u80fd\u4f7f\u7528\u6216\u7248\u672c\u8001\u65e7\uff08\u9700\u8981\u4fee\u6539\u8bb8\u591a\u5730\u65b9\uff09\uff0c\u5e76\u4e14\u6240\u6709\u90fd\u4e0d\u652f\u6301markdown\uff08\u9700\u8981\u52a0\u88c5\u4e2a\u5e93\uff09</p>\n<p>\u200b\t\t\u2461 \u4f7f\u7528Github Pages\u9ed8\u8ba4\u7684jekyll\u4f1a\u5bfc\u81f4sphinx\u6784\u5efa\u7684js\u4e0ecss\u65e0\u6cd5\u8bbf\u95ee\uff08\u56e0\u4e3ajekyll\u4f1a\u4e0d\u4f1a\u4f7f\u7528_\u5f00\u5934\u7684\u6587\u4ef6/\u6587\u4ef6\u5939\uff0c\u800csphinx\u6784\u5efa\u7684js\u4e0ecss\u5b58\u653e\u5728_static\u4e2d\uff09\uff0c\u56e0\u6b64\u9700\u8981\u7981\u7528jekyll</p>\n<p>\u200b\t\t\u2462sphinx\u51e0\u4e2a\u5e93\u7684\u7248\u672c\u8981\u6ce8\u610f\uff08\u4e4b\u524d\u56e0\u4e3a\u7248\u672c\u76f4\u63a5\u4e0d\u517c\u5bb9\u5bfc\u81f4\u641c\u7d22\u529f\u80fd\u65e0\u6cd5\u4f7f\u7528\uff09</p>\n</section>\n<section id=\"id4\">\n<h4>3. \u4e3b\u8981\u4ee3\u7801<a class=\"headerlink\" href=\"#id4\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>sphinx\u9879\u76ee\u6587\u4ef6\u653e\u5165docs\u76ee\u5f55\u4e0b</p>\n<p>/.github/workflows/Build&amp;Deploy.yml\u2014\u2014\u542f\u52a8</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Build&amp;Deploy</span><span class=\"w\"></span>\n<span class=\"nt\">on</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">pull_request</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">branches</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[</span><span class=\"w\"> </span><span class=\"nv\">master</span><span class=\"w\"> </span><span class=\"p p-Indicator\">]</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_dispatch</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">push</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">branches</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">master</span><span class=\"w\"></span>\n<span class=\"nt\">jobs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">build-Github</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ubuntu-latest</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/checkout@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"c1\"># Setup Conda</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">conda-incubator/setup-miniconda@v2</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">python-version</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">3.7</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"c1\"># Runs this action</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">./</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">package_name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;other_example&#39;</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/download-artifact@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Check Artifacts</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">ls -al</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">if [ ! -e documentation ]; then</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">echo &quot;documentation artifact not found&quot;</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">exit 1</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">ls -al documentation</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>/action.yml\u2014\u2014\u4e3bworkflow\uff0c\u914d\u7f6e\u73af\u5883\uff0c\u6784\u5efa\uff0c\u4e0a\u4f20\u81f3doc\u5206\u652f\uff0c\u53d1\u5e03\u5230release</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Build</span><span class=\"nv\"> </span><span class=\"s\">sphinx</span><span class=\"nv\"> </span><span class=\"s\">docs&#39;</span><span class=\"w\"></span>\n<span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Builds</span><span class=\"nv\"> </span><span class=\"s\">IDS</span><span class=\"nv\"> </span><span class=\"s\">Sphinx</span><span class=\"nv\"> </span><span class=\"s\">documentation&#39;</span><span class=\"w\"></span>\n<span class=\"nt\">permissions</span><span class=\"p\">:</span><span class=\"w\"> </span>\n<span class=\"w\">  </span><span class=\"nt\">contents</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">write</span><span class=\"w\"></span>\n<span class=\"nt\">inputs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">docs_path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"c1\"># id of input</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;The</span><span class=\"nv\"> </span><span class=\"s\">path</span><span class=\"nv\"> </span><span class=\"s\">to</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">documentation</span><span class=\"nv\"> </span><span class=\"s\">folder</span><span class=\"nv\"> </span><span class=\"s\">from</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">repo</span><span class=\"nv\"> </span><span class=\"s\">root&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;docs&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">conda_build_env_filepath</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Yaml</span><span class=\"nv\"> </span><span class=\"s\">Conda</span><span class=\"nv\"> </span><span class=\"s\">build</span><span class=\"nv\"> </span><span class=\"s\">environment</span><span class=\"nv\"> </span><span class=\"s\">definition</span><span class=\"nv\"> </span><span class=\"s\">file&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;action_default&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">conda_build_env_name</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Name</span><span class=\"nv\"> </span><span class=\"s\">of</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">build</span><span class=\"nv\"> </span><span class=\"s\">conda</span><span class=\"nv\"> </span><span class=\"s\">environment&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;action_default&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">base_env_prefix</span><span class=\"p\">:</span><span class=\"w\">  </span><span class=\"c1\"># id of input</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;The</span><span class=\"nv\"> </span><span class=\"s\">prefix</span><span class=\"nv\"> </span><span class=\"s\">of</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">base</span><span class=\"nv\"> </span><span class=\"s\">Conda</span><span class=\"nv\"> </span><span class=\"s\">environment</span><span class=\"nv\"> </span><span class=\"s\">for</span><span class=\"nv\"> </span><span class=\"s\">self-hosted</span><span class=\"nv\"> </span><span class=\"s\">runs.&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;/usr/share/miniconda&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">artifact_name</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Display</span><span class=\"nv\"> </span><span class=\"s\">name</span><span class=\"nv\"> </span><span class=\"s\">of</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">documentation</span><span class=\"nv\"> </span><span class=\"s\">artifact&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;documentation&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">package_folder_path</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Path</span><span class=\"nv\"> </span><span class=\"s\">to</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">folder</span><span class=\"nv\"> </span><span class=\"s\">containing</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">project</span><span class=\"se\">&#39;&#39;</span><span class=\"s\">s</span><span class=\"nv\"> </span><span class=\"s\">package(s)</span><span class=\"nv\"> </span><span class=\"s\">to</span><span class=\"nv\"> </span><span class=\"s\">be</span><span class=\"nv\"> </span><span class=\"s\">installed&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;conda_package&#39;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">package_name</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Name</span><span class=\"nv\"> </span><span class=\"s\">of</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">project</span><span class=\"se\">&#39;&#39;</span><span class=\"s\">s</span><span class=\"nv\"> </span><span class=\"s\">Conda</span><span class=\"nv\"> </span><span class=\"s\">package&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">false</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">default</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.repository.name }}</span><span class=\"w\"></span>\n<span class=\"nt\">outputs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">filepath</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;The</span><span class=\"nv\"> </span><span class=\"s\">file</span><span class=\"nv\"> </span><span class=\"s\">path</span><span class=\"nv\"> </span><span class=\"s\">of</span><span class=\"nv\"> </span><span class=\"s\">the</span><span class=\"nv\"> </span><span class=\"s\">generated</span><span class=\"nv\"> </span><span class=\"s\">HTML</span><span class=\"nv\"> </span><span class=\"s\">documentation&#39;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">value</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ steps.main.outputs.filepath }}</span><span class=\"w\"></span>\n<span class=\"nt\">runs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">using</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;composite&quot;</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">steps</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/checkout@v2.2.0</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">fetch-depth</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">0</span><span class=\"w\"> </span><span class=\"c1\"># Required due to the way Git works, without it this action won&#39;t be able to find any or the correct tags</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/download-artifact@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">artifacts</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">main</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;::set-output name=filepath::$(echo &quot;None&quot;)&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;CHECKS&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;------&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if [ -d ${{ inputs.docs_path }} ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;  Found the docs folder at ${{ inputs.docs_path }}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">else</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;  ERROR: Unable to locate the docs path, ${{ inputs.docs_path }}. Skipping the build of the docs.&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">exit 0</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;Selecting Build Env yml File&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if [ ${{ inputs.conda_build_env_filepath }} = &#39;action_default&#39; ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Using the default conda configuration&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CONDA_BUILD_ENV_FILE=&quot;${{ github.action_path }}/envs/build-docs.yml&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">elif [ -f ${{ inputs.conda_build_env_filepath }} ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CONDA_BUILD_ENV_FILE=${{ inputs.conda_build_env_filepath }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">else</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Using the default conda configuration&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CONDA_BUILD_ENV_FILE=&quot;${{ github.action_path }}/envs/build-docs.yml&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;CONDA_BUILD_ENV_FILE: ${CONDA_BUILD_ENV_FILE}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">cat &quot;${CONDA_BUILD_ENV_FILE}&quot;</span><span class=\"w\"></span>\n\n<span class=\"w\">        </span><span class=\"no\">echo &#39;source ${{ inputs.base_env_prefix }}/etc/profile.d/conda.sh&#39;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">source ${{ inputs.base_env_prefix }}/etc/profile.d/conda.sh</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;Checking that Conda is initialized&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if ! command -v conda &amp;&gt; /dev/null; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;ERROR: Conda is not setup.&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">exit 1</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;  Conda is initialized&quot;</span><span class=\"w\"></span>\n\n<span class=\"w\">        </span><span class=\"no\">echo &quot;Conda build docs env name&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if [ ${{ inputs.conda_build_env_name }} = &#39;action_default&#39; ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Using the default conda build env name: ${{ github.event.repository.name }}-build-docs&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CONDA_BUILD_ENV_NAME=&quot;${{ github.event.repository.name }}-build-docs&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">else</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Using the provided conda build env name: ${{ inputs.conda_build_env_name  }}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CONDA_BUILD_ENV_NAME=&quot;${{ inputs.conda_build_env_name  }}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n\n<span class=\"w\">        </span><span class=\"no\">echo &quot;&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;SETUP BUILD ENV&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;Set source&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;-----------------&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;Setting up ${{ github.event.repository.name }}-build environment&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">conda env update --name ${CONDA_BUILD_ENV_NAME} \\</span><span class=\"w\"></span>\n<span class=\"w\">                         </span><span class=\"no\">--file &quot;${CONDA_BUILD_ENV_FILE}&quot;  || \\</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">conda env create -f &quot;${CONDA_BUILD_ENV_FILE}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">conda activate ${CONDA_BUILD_ENV_NAME}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">ls -al ${{ inputs.package_folder_path }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;----------------&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if [ -a ${{ inputs.package_folder_path }}/${{ inputs.package_name }}-*.bz2 ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">conda update conda-build || conda install conda-build</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Installing project package&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">CHANNEL_PATH=&quot;${{runner.temp}}/channel/linux-64&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">mkdir -p &quot;${CHANNEL_PATH}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">cp ${{ inputs.package_folder_path }}/${{ inputs.package_name }}-*.bz2 ${CHANNEL_PATH}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">conda index &quot;${CHANNEL_PATH}&quot;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">conda update -c &quot;${CHANNEL_PATH}&quot; ${{ inputs.package_name }} || \\</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">conda install -c &quot;${CHANNEL_PATH}&quot; ${{ inputs.package_name }} || \\</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">(conda uninstall ${{ inputs.package_name }} &amp;&amp; \\</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">conda install -c &quot;${CHANNEL_PATH}&quot; ${{ inputs.package_name }})</span><span class=\"w\"></span>\n\n<span class=\"w\">        </span><span class=\"no\">else</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo &quot;Did not install project package&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;conda info&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">conda info</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;conda list&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">conda list</span><span class=\"w\"></span>\n\n<span class=\"w\">        </span><span class=\"no\">echo &quot;&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;BUILD DOCS&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;----------&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">cd ${{ inputs.docs_path }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">if [ -e &quot;./setup_source.sh&quot; ]; then</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">./setup_source.sh</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">fi</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">make html</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">dir</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">tar -cvf build.tar build</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">gzip -9 build.tar</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">zip -q -r build.zip build</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo &quot;::set-output name=filepath::$(echo &#39;${{ inputs.docs_path }}/build/html&#39;)&quot;</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">shell</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">bash -l {0}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/upload-artifact@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ inputs.artifact_name }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">docs/build/html</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">mkdir123</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">mkdir -p docs/build/html</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">shell</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">bash -l {0}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">JamesIves/github-pages-deploy-action@v4.3.3</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">branch</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">doc</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">folder</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">docs/build/html</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">previoustag</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;WyriHaximus/github-action-get-previous-tag@v1&quot;</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">fallback</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">1.0.0</span><span class=\"w\"> </span><span class=\"c1\"># Optional fallback tag to use when no tag can be found</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">semvers</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;WyriHaximus/github-action-next-semvers@v1&quot;</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">version</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ steps.previoustag.outputs.tag }}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ncipollo/release-action@v1</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">allowUpdates</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">true</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">tag</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ steps.semvers.outputs.patch }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Release ${{ steps.semvers.outputs.v_patch }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">artifacts</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">docs/build.zip</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">docs/build.tar.gz</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>/envs/build-docs.yml\u2014\u2014\u9700\u8981\u7684\u5e93</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">build-docs</span><span class=\"w\"></span>\n<span class=\"nt\">channels</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">defaults</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">conda-forge</span><span class=\"w\"></span>\n<span class=\"nt\">dependencies</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">conda=4.9.2</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">pip</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">pip</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx_markdown_tables==0.0.15</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx==4.5.0</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">recommonmark==0.7.1</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx_rtd_theme==1.0.0</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx-panels==0.6.0</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx-autobuild</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx-click==4.2.0</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sphinx-copybutton</span><span class=\"w\"></span>\n</pre></div>\n</div>\n</section>\n<section id=\"id5\">\n<h4>4. \u6210\u679c<a class=\"headerlink\" href=\"#id5\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>https://xqy2006.github.io/docs</p>\n</section>\n</section>\n<section id=\"github-actiongithub-issue\">\n<h3>\u4e8c\u3001\u57fa\u4e8eGithub Action\u548cGithub Issue\u7684\u97f3\u4e50\u751f\u6210<a class=\"headerlink\" href=\"#github-actiongithub-issue\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h3>\n<section id=\"id6\">\n<h4>1. \u4e00\u4e9b\u8bf4\u660e<a class=\"headerlink\" href=\"#id6\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>\u200b\t\t\u4e4b\u524d\u5199\u8fc7\u4e00\u4e2a\u524d\u7aef(Vue)+\u540e\u7aef(Flask)\u7248\u7684\uff0c\u65e0\u5948\u670d\u52a1\u5668\u7ec8\u6709\u4e00\u5929\u4f1a\u5230\u671f\uff0c\u7531\u4e8e\u6709\u7740\u505a<a class=\"reference external\" href=\"https://xqy2006.github.io/docs/%E5%89%8D%E7%AB%AF%EF%BC%86%E5%90%8E%E7%AB%AF/%E5%85%B6%E4%BB%96/contents.html#sphinx\">\u7b2c\u4e00\u4e2a\u9879\u76ee</a>\u7684\u7ecf\u9a8c\uff0c\u6240\u4ee5\u60f3\u5230\u4e86\u4f7f\u7528Github Action\u4f5c\u4e3a\u540e\u7aef\uff0c\u4f46\u662f\u5982\u679c\u81ea\u5df1\u5199\u524d\u7aef\u7684\u8bdd\u52bf\u5fc5\u9700\u8981\u5bf9Github\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u624d\u80fd\u89e6\u53d1workflow\uff0c\u800c\u5bf9Github\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u53c8\u9700\u8981\u767b\u5f55Github\u8d26\u53f7\uff0c\u592a\u9ebb\u70e6\u4e86\uff0c\u6709\u53ef\u80fd\u8fd8\u4f1a\u5bfc\u81f4token\u6cc4\u9732\uff0c\u4e0d\u5982\u76f4\u63a5\u4f7f\u7528Github\u81ea\u5e26\u7684Issue\u4f5c\u4e3a\u81ea\u5df1\u7684\u524d\u7aef\uff08~~\u5176\u5b9e\u662f\u61d2\u5f97\u5199~~\uff09</p>\n</section>\n<section id=\"id7\">\n<h4>2. \u4e00\u4e9b\u5751<a class=\"headerlink\" href=\"#id7\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>\u200b\t\t\u2460numpy\u7edd\u5bf9\u662f\u5927\u5751\uff0c\u5404\u79cd\u7248\u672c\u4e0d\u517c\u5bb9\uff08\u56e0\u6b64\u6ca1\u6709\u5c06packages\u4e0a\u4f20\u81f3\u4ed3\u5e93\uff09</p>\n<p>\u200b\t\t\u2461issue\u662fmarkdown\u7684\u8f93\u5165markdown\u7684\u8f93\u51fa\uff0c\u56e0\u6b64\u9700\u8981\u5bf9body\u8fdb\u884c\u4e00\u4e9b\u5904\u7406\uff08yaml\u51e0\u4e4e\u6ca1\u6709\u5bf9\u5b57\u7b26\u4e32\u5904\u7406\u7684\u80fd\u529b\uff0c\u53ea\u80fd\u4ea4\u7ed9\u811a\u672c\u4e86\uff09</p>\n<p>\u200b\t\t\u2462\u4e00\u5b9a\u8981\u7b49\u5f85Github Pages\u90e8\u7f72\u5b8c\u6bd5\u540e\u518d\u8bc4\u8bba\uff0c\u8981\u4e0d\u7136\u7ed3\u679c\u8fd8\u672a\u90e8\u7f72\u7528\u6237\u5c31\u6709\u53ef\u80fd\u53d1\u8d77\u4e0b\u8f7d\u8bf7\u6c42</p>\n</section>\n<section id=\"id8\">\n<h4>3. \u4e3b\u8981\u4ee3\u7801<a class=\"headerlink\" href=\"#id8\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>\u8bad\u7ec3\u8fc7\u7a0b\u7701\u7565\uff0c\u76f4\u63a5\u63a8\u7406</p>\n<p>\u7531\u4e8eGithub\u6700\u5927\u6587\u4ef6\u9650\u5236\u4e3a100M\uff0c\u6545\u5c06\u6a21\u578b\u538b\u7f29</p>\n<p>music.py\u2014\u2014\u63a8\u7406\u4e3b\u7a0b\u5e8f</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">zipfile</span>\n \n<span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZipFile</span><span class=\"p\">(</span><span class=\"s2\">&quot;./Midi_Model/best_model.zip&quot;</span><span class=\"p\">,</span><span class=\"s1\">&#39;r&#39;</span><span class=\"p\">)</span> <span class=\"c1\"># \u538b\u7f29\u6587\u4ef6\u4f4d\u7f6e</span>\n<span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">namelist</span><span class=\"p\">():</span>\n    <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">extract</span><span class=\"p\">(</span><span class=\"n\">file</span><span class=\"p\">,</span><span class=\"s2\">&quot;./Midi_Model/&quot;</span><span class=\"p\">)</span>               <span class=\"c1\"># \u89e3\u538b\u4f4d\u7f6e</span>\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n<span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZipFile</span><span class=\"p\">(</span><span class=\"s2\">&quot;./Midi_Model/final_model.zip&quot;</span><span class=\"p\">,</span><span class=\"s1\">&#39;r&#39;</span><span class=\"p\">)</span> <span class=\"c1\"># \u538b\u7f29\u6587\u4ef6\u4f4d\u7f6e</span>\n<span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">namelist</span><span class=\"p\">():</span>\n    <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">extract</span><span class=\"p\">(</span><span class=\"n\">file</span><span class=\"p\">,</span><span class=\"s2\">&quot;./Midi_Model/&quot;</span><span class=\"p\">)</span>               <span class=\"c1\"># \u89e3\u538b\u4f4d\u7f6e</span>\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"nb\">input</span> <span class=\"o\">=</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">from</span> <span class=\"nn\">music21</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">import</span> <span class=\"nn\">base64</span>\n<span class=\"kn\">import</span> <span class=\"nn\">paddle</span>\n<span class=\"kn\">import</span> <span class=\"nn\">paddle.nn</span> <span class=\"k\">as</span> <span class=\"nn\">nn</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">from</span> <span class=\"nn\">Reader</span> <span class=\"kn\">import</span> <span class=\"n\">Reader</span>\n<span class=\"kn\">import</span> <span class=\"nn\">Seq2Seq</span>\n<span class=\"kn\">from</span> <span class=\"nn\">binascii</span> <span class=\"kn\">import</span> <span class=\"n\">b2a_hex</span>\n\n<span class=\"n\">batch_size</span> <span class=\"o\">=</span> <span class=\"mi\">10</span>\n<span class=\"n\">train_reader</span> <span class=\"o\">=</span> <span class=\"n\">Reader</span><span class=\"p\">(</span><span class=\"n\">batch_size</span><span class=\"p\">,</span> <span class=\"s1\">&#39;./work/data&#39;</span><span class=\"p\">)</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"c1\"># \u521d\u59cb\u5316log\u5199\u5165\u5668</span>\n\n<span class=\"c1\"># \u6a21\u578b\u53c2\u6570\u8bbe\u7f6e</span>\n<span class=\"n\">embedding_size</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>\n<span class=\"n\">hidden_size</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>\n<span class=\"n\">num_layers</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n\n<span class=\"c1\"># \u8bad\u7ec3\u53c2\u6570\u8bbe\u7f6e</span>\n<span class=\"n\">epoch_num</span> <span class=\"o\">=</span> <span class=\"mi\">5000</span>\n<span class=\"n\">learning_rate</span> <span class=\"o\">=</span> <span class=\"mf\">1e-5</span>\n<span class=\"n\">log_iter</span> <span class=\"o\">=</span> <span class=\"mi\">200</span>\n\n<span class=\"c1\"># \u5b9a\u4e49\u4e00\u4e9b\u6240\u9700\u53d8\u91cf</span>\n<span class=\"n\">global_step</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">log_step</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">max_acc</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n\n<span class=\"n\">midi_model</span> <span class=\"o\">=</span> <span class=\"n\">Seq2Seq</span><span class=\"o\">.</span><span class=\"n\">Midi_Model</span><span class=\"p\">(</span>\n    <span class=\"n\">char_len</span><span class=\"o\">=</span><span class=\"mh\">0x9FFF</span><span class=\"p\">,</span>  <span class=\"c1\"># \u57fa\u672c\u6c49\u5b57\u7684Unicode\u7801\u8303\u56f4\u4e3a4E00-9FA5,\u8fd9\u91cc\u8bbe\u7f6e0x9FFF\u957f\uff0c\u57fa\u672c\u591f\u7528</span>\n    <span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"n\">embedding_size</span><span class=\"p\">,</span>\n    <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n    <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"n\">num_layers</span><span class=\"p\">,</span>\n    <span class=\"n\">batch_size</span><span class=\"o\">=</span><span class=\"n\">batch_size</span><span class=\"p\">)</span>\n<span class=\"n\">dur_model</span> <span class=\"o\">=</span> <span class=\"n\">Seq2Seq</span><span class=\"o\">.</span><span class=\"n\">Duration_Model</span><span class=\"p\">(</span>\n    <span class=\"n\">char_len</span><span class=\"o\">=</span><span class=\"mi\">200</span><span class=\"p\">,</span>  <span class=\"c1\"># midi\u8303\u56f4\u4e00\u822c\u5728100\u5de6\u53f3,\u8fd9\u91cc\u8bbe\u7f6e200\u957f\uff0c\u57fa\u672c\u591f\u7528</span>\n    <span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"n\">embedding_size</span><span class=\"p\">,</span>\n    <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n    <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"n\">num_layers</span><span class=\"p\">,</span>\n    <span class=\"n\">batch_size</span><span class=\"o\">=</span><span class=\"n\">batch_size</span><span class=\"p\">)</span>\n<span class=\"n\">midi_model</span><span class=\"o\">.</span><span class=\"n\">set_state_dict</span><span class=\"p\">(</span><span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">&#39;Midi_Model/final_model&#39;</span><span class=\"p\">))</span>\n<span class=\"n\">dur_model</span><span class=\"o\">.</span><span class=\"n\">set_state_dict</span><span class=\"p\">(</span><span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">&#39;Duration_Model/final_model&#39;</span><span class=\"p\">))</span>\n<span class=\"n\">input_lyrics</span> <span class=\"o\">=</span> <span class=\"nb\">input</span>\n<span class=\"n\">lyrics</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">lyric</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">input_lyrics</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s1\">&#39;</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span><span class=\"p\">)):</span>\n    <span class=\"k\">if</span> <span class=\"n\">i</span> <span class=\"o\">%</span> <span class=\"n\">batch_size</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">lyrics</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([])</span>\n    <span class=\"n\">lyrics</span><span class=\"p\">[</span><span class=\"n\">i</span> <span class=\"o\">//</span> <span class=\"n\">batch_size</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"n\">lyric</span><span class=\"p\">))</span>\n<span class=\"k\">while</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">lyrics</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"o\">%</span> <span class=\"n\">batch_size</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n    <span class=\"n\">lyrics</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">&#39;#&#39;</span><span class=\"p\">))</span>\n<span class=\"n\">lyrics</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">to_tensor</span><span class=\"p\">(</span><span class=\"n\">lyrics</span><span class=\"p\">)</span>\n\n<span class=\"n\">params_dict</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">&#39;Midi_Model/best_model&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">midi_model</span><span class=\"o\">.</span><span class=\"n\">set_dict</span><span class=\"p\">(</span><span class=\"n\">params_dict</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># \u8bbe\u7f6e\u4e3a\u8bc4\u4f30\u6a21\u5f0f</span>\n<span class=\"n\">midi_model</span><span class=\"o\">.</span><span class=\"n\">eval</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># \u6a21\u578b\u63a8\u7406</span>\n<span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">midi_model</span><span class=\"p\">(</span><span class=\"n\">lyrics</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># \u7ed3\u679c\u8f6c\u6362</span>\n<span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">argmax</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"o\">.</span><span class=\"n\">numpy</span><span class=\"p\">(),</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">):</span>\n    <span class=\"n\">results</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">)</span>\n\n<span class=\"n\">midis</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"n\">dur_dic</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;dur_dic.json&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;r&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">dur_str</span> <span class=\"o\">=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">readline</span><span class=\"p\">()</span>\n    <span class=\"n\">dur_dic</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">dur_str</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">midi</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">i</span> <span class=\"o\">%</span> <span class=\"n\">batch_size</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">midis</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([])</span>\n    <span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"n\">i</span> <span class=\"o\">//</span> <span class=\"n\">batch_size</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">midi</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">midi</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">200</span> <span class=\"k\">else</span> <span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"n\">i</span> <span class=\"o\">//</span> <span class=\"n\">batch_size</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"k\">while</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"o\">%</span> <span class=\"n\">batch_size</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n    <span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">midis</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">to_tensor</span><span class=\"p\">(</span><span class=\"n\">midis</span><span class=\"p\">)</span>\n\n<span class=\"n\">params_dict</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">&#39;Duration_Model/best_model&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">dur_model</span><span class=\"o\">.</span><span class=\"n\">set_dict</span><span class=\"p\">(</span><span class=\"n\">params_dict</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># \u8bbe\u7f6e\u4e3a\u8bc4\u4f30\u6a21\u5f0f</span>\n<span class=\"n\">dur_model</span><span class=\"o\">.</span><span class=\"n\">eval</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># \u6a21\u578b\u63a8\u7406</span>\n<span class=\"c1\"># out = nn.Softmax(dur_model(midis))</span>\n<span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">dur_model</span><span class=\"p\">(</span><span class=\"n\">midis</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># \u7ed3\u679c\u8f6c\u6362</span>\n<span class=\"n\">durations</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">argmax</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"o\">.</span><span class=\"n\">numpy</span><span class=\"p\">(),</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">):</span>\n    <span class=\"n\">durations</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">)</span>\n\n<span class=\"n\">dur_dic</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;dur_dic.json&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;r&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">dur_str</span> <span class=\"o\">=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">readline</span><span class=\"p\">()</span>\n    <span class=\"n\">dur_dic</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">dur_str</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"p\">)</span>\n\n<span class=\"n\">stream1</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">Stream</span><span class=\"p\">()</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">lyric</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">input_lyrics</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s1\">&#39;</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span><span class=\"p\">)):</span>\n    <span class=\"k\">if</span> <span class=\"n\">results</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">n1</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">Note</span><span class=\"p\">(</span><span class=\"n\">results</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">])</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">n1</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">Rest</span><span class=\"p\">()</span>\n    <span class=\"n\">n1</span><span class=\"o\">.</span><span class=\"n\">addLyric</span><span class=\"p\">(</span><span class=\"n\">lyric</span><span class=\"p\">)</span>\n    <span class=\"n\">n1</span><span class=\"o\">.</span><span class=\"n\">duration</span> <span class=\"o\">=</span> <span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">Duration</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">durations</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">])])</span>\n    <span class=\"n\">stream1</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">n1</span><span class=\"p\">)</span>\n<span class=\"kn\">import</span> <span class=\"nn\">random</span>\n<span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span>\n<span class=\"n\">stream1</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;./result/&#39;</span> <span class=\"o\">+</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"s2\">&quot;.xml&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">stream1</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;midi&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;./result/&#39;</span> <span class=\"o\">+</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;.midi&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">output</span> <span class=\"o\">=</span> <span class=\"nb\">input</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;.midi&#39;</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">output</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>verify.py\u2014\u2014\u6821\u9a8c\u8f93\u5165\u662f\u5426\u5168\u90e8\u4e3a\u4e2d\u6587\u5b57\u7b26\uff0c\u82e5\u4e0d\u662f\u5219\u62a5\u9519\uff0c\u7531verify.yml\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"nb\">input</span> <span class=\"o\">=</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"k\">def</span> <span class=\"nf\">check_contain_chinese</span><span class=\"p\">(</span><span class=\"n\">check_str</span><span class=\"p\">):</span>\n\t<span class=\"k\">for</span> <span class=\"n\">ch</span> <span class=\"ow\">in</span> <span class=\"n\">check_str</span><span class=\"p\">:</span>\n\t\t<span class=\"k\">if</span> <span class=\"sa\">u</span><span class=\"s1\">&#39;</span><span class=\"se\">\\u4e00</span><span class=\"s1\">&#39;</span> <span class=\"o\">&lt;=</span> <span class=\"n\">ch</span> <span class=\"o\">&lt;=</span> <span class=\"sa\">u</span><span class=\"s1\">&#39;</span><span class=\"se\">\\u9f5a</span><span class=\"s1\">&#39;</span><span class=\"p\">:</span>\n\t\t\t<span class=\"k\">pass</span>\n\t\t<span class=\"k\">else</span><span class=\"p\">:</span>\n\t\t\t<span class=\"k\">return</span> <span class=\"kc\">True</span>\n\t<span class=\"k\">return</span> <span class=\"kc\">False</span>\n<span class=\"k\">if</span> <span class=\"n\">check_contain_chinese</span><span class=\"p\">(</span><span class=\"nb\">input</span><span class=\"p\">):</span>\n\t<span class=\"k\">raise</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s1\">&#39;error&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>sleep.py\u2014\u2014\u7b49\u5f85Github Pages\u90e8\u7f72\u5b8c\u6210\u540e\u518d\u56de\u590d</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">urllib3</span>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"n\">urllib3</span><span class=\"o\">.</span><span class=\"n\">disable_warnings</span><span class=\"p\">()</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"k\">def</span> <span class=\"nf\">download</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">):</span>\n  <span class=\"n\">headers</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">&quot;User-Agent&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Firefox/68.0&quot;</span>\n  <span class=\"p\">}</span>\n  <span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"o\">=</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"o\">=</span><span class=\"n\">headers</span><span class=\"p\">,</span><span class=\"n\">verify</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n  <span class=\"k\">return</span> <span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">status_code</span>\n<span class=\"k\">while</span> <span class=\"n\">download</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://xqy2006.github.io/music_generation/&#39;</span><span class=\"o\">+</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">+</span><span class=\"s1\">&#39;.xml&#39;</span><span class=\"p\">)</span><span class=\"o\">==</span><span class=\"mi\">404</span><span class=\"p\">:</span>\n  <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;Page undeploy&quot;</span><span class=\"p\">)</span>\n  <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;finish&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>/.github/ISSUE_TEMPLATE/music_generation.yml\u2014\u2014\u95ee\u9898\u6a21\u677f</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">\u97f3\u4e50\u751f\u6210</span><span class=\"w\"></span>\n<span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">\u97f3\u4e50\u751f\u6210</span><span class=\"w\"></span>\n<span class=\"nt\">title</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;\u97f3\u4e50\u751f\u6210&quot;</span><span class=\"w\"></span>\n<span class=\"nt\">labels</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[</span><span class=\"s\">&quot;music_generation&quot;</span><span class=\"p p-Indicator\">]</span><span class=\"w\"></span>\n<span class=\"nt\">body</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">type</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">textarea</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">input_text</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">attributes</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">label</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;\u6b4c\u8bcd&quot;</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">description</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">\u8bf7\u8f93\u5165\u8981\u8c31\u66f2\u7684\u6b4c\u8bcd\uff08\u53ea\u80fd\u662f\u4e2d\u6587\uff0c\u65e0\u6807\u70b9\uff09\uff1a</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">placeholder</span><span class=\"p\">:</span><span class=\"w\"> </span>\n<span class=\"w\">      </span><span class=\"nt\">value</span><span class=\"p\">:</span><span class=\"w\"> </span>\n<span class=\"w\">    </span><span class=\"nt\">validations</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">required</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">true</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>music_generation/.github/workflows/music.yml\u2014\u2014\u4e3bworkflow\uff0c\u5c06issue\u7684body\u4e0eid\u4f20\u5165python\u5904\u7406\uff0cpush\u751f\u6210\u7ed3\u679c\u6587\u4ef6\u5230store\u5206\u652f\u6784\u5efaGithub Pages\uff0c\u56de\u590d\u5e76\u5173\u95edissue</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">music</span><span class=\"w\"></span>\n<span class=\"nt\">on</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">issues</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">types</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[</span><span class=\"nv\">opened</span><span class=\"p p-Indicator\">,</span><span class=\"nv\">edited</span><span class=\"p p-Indicator\">]</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_dispatch</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"nt\">jobs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">build</span><span class=\"p\">:</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ubuntu-latest</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/checkout@v2</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">mkdir -p ./id</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"no\">echo $ID &gt; ./id/id</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">env</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">ID</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.number }}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/upload-artifact@v3</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">id</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">id/</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/setup-python@v4</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">python-version</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;3.x&#39;</span><span class=\"w\"> </span><span class=\"c1\"># Version range or exact version of a Python version to use, using SemVer&#39;s version range syntax</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">architecture</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;x64&#39;</span><span class=\"w\"> </span><span class=\"c1\"># optional x64 or x86. Defaults to x64 if not specified</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">python verify.py $BODY</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">git clone -b store https://github.com/xqy2006/music_generation.git &quot;result&quot;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">pip install paddlepaddle</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">pip install music21</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">pip install protobuf==3.20.0</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">python music.py $BODY $ID</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">env</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">BODY</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.body }}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">ID</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.number }}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">JamesIves/github-pages-deploy-action@v4.3.3</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">branch</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">store</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">folder</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">result</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">rishabhgupta/split-by@v1</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">split</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">string</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.body }}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">split-by</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;\u6b4c\u8bcd</span><span class=\"nv\"> </span><span class=\"s\">\\n</span><span class=\"nv\"> </span><span class=\"s\">&quot;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">mad9000/actions-find-and-replace-string@2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">id</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">findandreplace</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">source</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ steps.split.outputs._1}}</span><span class=\"w\"> </span><span class=\"c1\"># this translates to ref/heads/main on the main branch, but can be any arbitrary string </span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">find</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;\\n&quot;</span><span class=\"w\">        </span><span class=\"c1\"># we want to remove ref/heads/ from source </span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">replace</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;&#39;</span><span class=\"w\">               </span><span class=\"c1\"># and replace it with a blank string (ie. removing it)</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">python sleep.py $ID</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"no\">echo OK!</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">env</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">ID</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.number }}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Create comment</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions-cool/issues-helper@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">actions</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;create-comment&#39;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">token</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ secrets.GITHUB_TOKEN }}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">issue-number</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.number }}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">body</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">\u4f60\u597d ${{ github.event.issue.user.login }} \uff0c\u751f\u6210\u7ed3\u679c\u5982\u4e0b\uff1a</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">midi\u683c\u5f0f\u4e0b\u8f7d\u5730\u5740\u4e3a\uff08\u5bfc\u5165\u5230\u66f2\u8c31\u8f6f\u4ef6\u4e2d\u65e0\u6b4c\u8bcd\uff0c\u53ef\u5728\u7535\u8111\u4e0a\u76f4\u63a5\u64ad\u653e\uff09\uff1ahttps://xqy2006.github.io/music_generation/${{ github.event.issue.number }}.midi</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">xml\u683c\u5f0f\u4e0b\u8f7d\u5730\u5740\u4e3a\uff08\u5bfc\u5165\u5230\u66f2\u8c31\u8f6f\u4ef6\u4e2d\u6709\u6b4c\u8bcd\uff0c\u4e0d\u53ef\u5728\u7535\u8111\u4e0a\u76f4\u63a5\u64ad\u653e\uff09\uff1ahttps://xqy2006.github.io/music_generation/${{ github.event.issue.number }}.xml</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Close issue</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions-cool/issues-helper@v2</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">actions</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;close-issue&#39;</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">token</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ secrets.GITHUB_TOKEN }}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">issue-number</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.issue.number }}</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>music_generation/.github/workflows/verify.yml\u2014\u2014\u5f53music.yml\u62a5\u9519\u540e\u8fd0\u884c\uff08\u7531verify.py\u629b\u51fa\uff09\uff0c\u56de\u590d\u5e76\u5173\u95edissue</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">verify</span><span class=\"w\"></span>\n<span class=\"nt\">on</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_run</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">workflows</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[</span><span class=\"nv\">music</span><span class=\"p p-Indicator\">]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">types</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[</span><span class=\"nv\">completed</span><span class=\"p p-Indicator\">]</span><span class=\"w\"></span>\n<span class=\"nt\">jobs</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">on-failure</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ubuntu-latest</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">if</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.event.workflow_run.conclusion == &#39;failure&#39; }}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Download</span><span class=\"nv\"> </span><span class=\"s\">artifact&#39;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/github-script@v6</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">script</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let allArtifacts = await github.rest.actions.listWorkflowRunArtifacts({</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">owner: context.repo.owner,</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">repo: context.repo.repo,</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">run_id: context.payload.workflow_run.id,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">});</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let matchArtifact = allArtifacts.data.artifacts.filter((artifact) =&gt; {</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">return artifact.name == &quot;id&quot;</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">})[0];</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let download = await github.rest.actions.downloadArtifact({</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">owner: context.repo.owner,</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">repo: context.repo.repo,</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">artifact_id: matchArtifact.id,</span><span class=\"w\"></span>\n<span class=\"w\">               </span><span class=\"no\">archive_format: &#39;zip&#39;,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">});</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let fs = require(&#39;fs&#39;);</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">fs.writeFileSync(`${process.env.GITHUB_WORKSPACE}/id.zip`, Buffer.from(download.data));</span><span class=\"w\"></span>\n\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Unzip</span><span class=\"nv\"> </span><span class=\"s\">artifact&#39;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">unzip id.zip</span><span class=\"w\"></span>\n\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">&#39;Comment</span><span class=\"nv\"> </span><span class=\"s\">on</span><span class=\"nv\"> </span><span class=\"s\">issue&#39;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/github-script@v6</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">with</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">github-token</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ secrets.GITHUB_TOKEN }}</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"nt\">script</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let fs = require(&#39;fs&#39;);</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">let issue_number = Number(fs.readFileSync(&#39;./id&#39;));</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">await github.rest.issues.createComment({</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">owner: context.repo.owner,</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">repo: context.repo.repo,</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">issue_number: issue_number,</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">body:&quot;# \u60a8\u7684\u8f93\u5165\u6709\u8bef\uff01\\n\u8bf7\u68c0\u67e5\u60a8\u7684\u8f93\u5165\u662f\u5426\u5168\u90e8\u4e3a\u4e2d\u6587\u5b57\u7b26\uff0c\u5e76\u4e14\u6ca1\u6709\u6807\u70b9\\n\u53ef\u4ee5\u901a\u8fc7 https://xqy2006.github.io/Chinese-character/ \u53bb\u9664\u975e\u4e2d\u6587\u5b57\u7b26&quot;,</span><span class=\"w\"></span>\n<span class=\"w\">                      </span><span class=\"no\">});</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">await github.rest.issues.update({</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">owner: context.repo.owner,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">repo: context.repo.repo,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">issue_number: issue_number,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">state: &#39;closed&#39;,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"no\">});</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>Seq2Seq.py\u2014\u2014\u63a8\u7406\u6240\u9700</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">paddle</span>\n<span class=\"kn\">import</span> <span class=\"nn\">paddle.nn</span> <span class=\"k\">as</span> <span class=\"nn\">nn</span>\n\n<span class=\"c1\"># \u7ee7\u627fpaddle.nn.Layer\u7c7b</span>\n<span class=\"k\">class</span> <span class=\"nc\">Midi_Model</span><span class=\"p\">(</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Layer</span><span class=\"p\">):</span>\n    <span class=\"c1\"># \u91cd\u5199\u521d\u59cb\u5316\u51fd\u6570</span>\n    <span class=\"c1\"># \u53c2\u6570\uff1a\u5b57\u7b26\u8868\u957f\u5ea6\u3001\u5d4c\u5165\u5c42\u5927\u5c0f\u3001\u9690\u85cf\u5c42\u5927\u5c0f\u3001\u89e3\u7801\u5668\u5c42\u6570\u3001\u5904\u7406\u6570\u5b57\u7684\u6700\u5927\u4f4d\u6570</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">char_len</span><span class=\"p\">,</span> <span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">batch_size</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Midi_Model</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">()</span>\n        <span class=\"c1\"># \u521d\u59cb\u5316\u53d8\u91cf</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MAXLEN</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">batch_size</span> <span class=\"o\">=</span> <span class=\"n\">batch_size</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span> <span class=\"o\">=</span> <span class=\"n\">hidden_size</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span> <span class=\"o\">=</span> <span class=\"n\">char_len</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"n\">num_layers</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"n\">embedding_size</span>\n\n        <span class=\"c1\"># \u5d4c\u5165\u5c42</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">emb</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Embedding</span><span class=\"p\">(</span>\n            <span class=\"n\">char_len</span><span class=\"p\">,</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">embedding_size</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u7f16\u7801\u5668</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoder</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">LSTM</span><span class=\"p\">(</span>\n            <span class=\"n\">input_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">embedding_size</span><span class=\"p\">,</span>\n            <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u89e3\u7801\u5668</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">decoder</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">LSTM</span><span class=\"p\">(</span>\n            <span class=\"n\">input_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5168\u8fde\u63a5\u5c42</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fc</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Linear</span><span class=\"p\">(</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">char_len</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"c1\"># \u91cd\u5199\u6a21\u578b\u524d\u5411\u8ba1\u7b97\u51fd\u6570</span>\n    <span class=\"c1\"># \u53c2\u6570\uff1a\u8f93\u5165[None, MAXLEN]\u3001\u6807\u7b7e[None, DIGITS]</span>\n    <span class=\"k\">def</span> <span class=\"nf\">forward</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">inputs</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"c1\"># \u5d4c\u5165\u5c42</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">emb</span><span class=\"p\">(</span><span class=\"n\">inputs</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u7f16\u7801\u5668</span>\n        <span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoder</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u6309\u65f6\u95f4\u6b65\u5207\u5206\u7f16\u7801\u5668\u8f93\u51fa</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MAXLEN</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u53d6\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa\u5e76\u590d\u5236batch_size\u6b21</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">expand</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"n\">out</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">shape</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">batch_size</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">])</span>\n\n        <span class=\"c1\"># \u89e3\u7801\u5668</span>\n        <span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">decoder</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5168\u8fde\u63a5</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fc</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5982\u679c\u6807\u7b7e\u5b58\u5728\uff0c\u5219\u8ba1\u7b97\u5176\u635f\u5931\u548c\u51c6\u786e\u7387</span>\n        <span class=\"k\">if</span> <span class=\"n\">labels</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"c1\"># \u8f6c\u7f6e\u89e3\u7801\u5668\u8f93\u51fa</span>\n            <span class=\"n\">tmp</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">transpose</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span>\n\n            <span class=\"c1\"># \u8ba1\u7b97\u4ea4\u53c9\u71b5\u635f\u5931</span>\n            <span class=\"n\">loss</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">functional</span><span class=\"o\">.</span><span class=\"n\">cross_entropy</span><span class=\"p\">(</span><span class=\"n\">tmp</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># \u8ba1\u7b97\u51c6\u786e\u7387</span>\n            <span class=\"n\">acc</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">metric</span><span class=\"o\">.</span><span class=\"n\">accuracy</span><span class=\"p\">(</span><span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span><span class=\"p\">]),</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"n\">labels</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]))</span>\n\n            <span class=\"c1\"># \u8fd4\u56de\u635f\u5931\u548c\u51c6\u786e\u7387</span>\n            <span class=\"k\">return</span> <span class=\"n\">loss</span><span class=\"p\">,</span> <span class=\"n\">acc</span>\n\n        <span class=\"c1\"># \u8fd4\u56de\u8f93\u51fa</span>\n        <span class=\"k\">return</span> <span class=\"n\">out</span>\n\n\n<span class=\"c1\"># \u7ee7\u627fpaddle.nn.Layer\u7c7b</span>\n<span class=\"k\">class</span> <span class=\"nc\">Duration_Model</span><span class=\"p\">(</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Layer</span><span class=\"p\">):</span>\n    <span class=\"c1\"># \u91cd\u5199\u521d\u59cb\u5316\u51fd\u6570</span>\n    <span class=\"c1\"># \u53c2\u6570\uff1a\u5b57\u7b26\u8868\u957f\u5ea6\u3001\u5d4c\u5165\u5c42\u5927\u5c0f\u3001\u9690\u85cf\u5c42\u5927\u5c0f\u3001\u89e3\u7801\u5668\u5c42\u6570\u3001\u5904\u7406\u6570\u5b57\u7684\u6700\u5927\u4f4d\u6570</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">char_len</span><span class=\"p\">,</span> <span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"mi\">64</span><span class=\"p\">,</span> <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">batch_size</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Duration_Model</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">()</span>\n        <span class=\"c1\"># \u521d\u59cb\u5316\u53d8\u91cf</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">batch_size</span> <span class=\"o\">=</span> <span class=\"n\">batch_size</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MAXLEN</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span> <span class=\"o\">=</span> <span class=\"n\">hidden_size</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span> <span class=\"o\">=</span> <span class=\"n\">char_len</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"n\">num_layers</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">embedding_size</span><span class=\"o\">=</span><span class=\"n\">embedding_size</span>\n\n        <span class=\"c1\"># \u5d4c\u5165\u5c42</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">emb</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Embedding</span><span class=\"p\">(</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span><span class=\"p\">,</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">embedding_size</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u7f16\u7801\u5668</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoder</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">LSTM</span><span class=\"p\">(</span>\n            <span class=\"n\">input_size</span><span class=\"o\">=</span><span class=\"n\">embedding_size</span><span class=\"p\">,</span>\n            <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u89e3\u7801\u5668</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">decoder</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">LSTM</span><span class=\"p\">(</span>\n            <span class=\"n\">input_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_layers</span>\n        <span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5168\u8fde\u63a5\u5c42</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fc</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Linear</span><span class=\"p\">(</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">,</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"c1\"># \u91cd\u5199\u6a21\u578b\u524d\u5411\u8ba1\u7b97\u51fd\u6570</span>\n    <span class=\"c1\"># \u53c2\u6570\uff1a\u8f93\u5165[None, MAXLEN]\u3001\u6807\u7b7e[None, DIGITS]</span>\n    <span class=\"k\">def</span> <span class=\"nf\">forward</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">inputs</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"c1\"># \u5d4c\u5165\u5c42</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">emb</span><span class=\"p\">(</span><span class=\"n\">inputs</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u7f16\u7801\u5668</span>\n        <span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoder</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u6309\u65f6\u95f4\u6b65\u5207\u5206\u7f16\u7801\u5668\u8f93\u51fa</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MAXLEN</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u53d6\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa\u5e76\u590d\u5236batch_size\u6b21</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">expand</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"n\">out</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">shape</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">batch_size</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">hidden_size</span><span class=\"p\">])</span>\n\n        <span class=\"c1\"># \u89e3\u7801\u5668</span>\n        <span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">decoder</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5168\u8fde\u63a5</span>\n        <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fc</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># \u5982\u679c\u6807\u7b7e\u5b58\u5728\uff0c\u5219\u8ba1\u7b97\u5176\u635f\u5931\u548c\u51c6\u786e\u7387</span>\n        <span class=\"k\">if</span> <span class=\"n\">labels</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"c1\"># \u8f6c\u7f6e\u89e3\u7801\u5668\u8f93\u51fa</span>\n            <span class=\"n\">tmp</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">transpose</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span>\n\n            <span class=\"c1\"># \u8ba1\u7b97\u4ea4\u53c9\u71b5\u635f\u5931</span>\n            <span class=\"n\">loss</span> <span class=\"o\">=</span> <span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">functional</span><span class=\"o\">.</span><span class=\"n\">cross_entropy</span><span class=\"p\">(</span><span class=\"n\">tmp</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># \u8ba1\u7b97\u51c6\u786e\u7387</span>\n            <span class=\"n\">acc</span> <span class=\"o\">=</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">metric</span><span class=\"o\">.</span><span class=\"n\">accuracy</span><span class=\"p\">(</span><span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">char_len</span><span class=\"p\">]),</span> <span class=\"n\">paddle</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"n\">labels</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]))</span>\n\n            <span class=\"c1\"># \u8fd4\u56de\u635f\u5931\u548c\u51c6\u786e\u7387</span>\n            <span class=\"k\">return</span> <span class=\"n\">loss</span><span class=\"p\">,</span> <span class=\"n\">acc</span>\n\n        <span class=\"c1\"># \u8fd4\u56de\u8f93\u51fa</span>\n        <span class=\"k\">return</span> <span class=\"n\">out</span>\n</pre></div>\n</div>\n<p>Reader.py\u2014\u2014\u63a8\u7406\u6240\u9700</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">music21</span> <span class=\"kn\">import</span> <span class=\"n\">note</span><span class=\"p\">,</span><span class=\"n\">converter</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">fractions</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">Reader</span><span class=\"p\">(</span><span class=\"n\">DIGITS</span><span class=\"p\">,</span><span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;./work/data&#39;</span><span class=\"p\">):</span>\n    <span class=\"n\">dur_dic</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"k\">def</span> <span class=\"nf\">read_data</span><span class=\"p\">():</span>\n        <span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">listdir</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">):</span>\n            <span class=\"n\">lyrics</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n            <span class=\"n\">midis</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n            <span class=\"n\">durations</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n            <span class=\"n\">xml</span> <span class=\"o\">=</span> <span class=\"n\">converter</span><span class=\"o\">.</span><span class=\"n\">parseFile</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span><span class=\"n\">file</span><span class=\"p\">))</span>\n            <span class=\"c1\">#print(dir(stream.Score()))</span>\n            <span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">note</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">xml</span><span class=\"o\">.</span><span class=\"n\">recurse</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">notesAndRests</span><span class=\"p\">):</span>\n                <span class=\"k\">if</span> <span class=\"n\">i</span><span class=\"o\">%</span><span class=\"n\">DIGITS</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n                    <span class=\"n\">lyrics</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([])</span>\n                    <span class=\"n\">midis</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([])</span>\n                    <span class=\"n\">durations</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([])</span>\n                <span class=\"n\">lyric</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">_getLyric</span><span class=\"p\">()</span>\n                <span class=\"k\">if</span> <span class=\"n\">lyric</span> <span class=\"o\">==</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n                    <span class=\"n\">lyric</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;#&#39;</span>\n                <span class=\"n\">lyrics</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">//</span><span class=\"n\">DIGITS</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"n\">lyric</span><span class=\"p\">))</span>\n                <span class=\"k\">try</span><span class=\"p\">:</span>\n                    <span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">//</span><span class=\"n\">DIGITS</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">pitch</span><span class=\"o\">.</span><span class=\"n\">midi</span><span class=\"p\">)</span>\n                <span class=\"k\">except</span><span class=\"p\">:</span>\n                    <span class=\"n\">midis</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">//</span><span class=\"n\">DIGITS</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n                <span class=\"n\">durations</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">//</span><span class=\"n\">DIGITS</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span><span class=\"p\">)</span>\n                <span class=\"k\">if</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">fractions</span><span class=\"o\">.</span><span class=\"n\">Fraction</span> <span class=\"ow\">and</span> <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span><span class=\"p\">)</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">()):</span>\n                        <span class=\"n\">dur_dic</span><span class=\"p\">[</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"p\">)]</span> <span class=\"o\">=</span> <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span><span class=\"p\">)</span>\n                <span class=\"k\">elif</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"n\">fractions</span><span class=\"o\">.</span><span class=\"n\">Fraction</span> <span class=\"ow\">and</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">()):</span>\n                    <span class=\"n\">dur_dic</span><span class=\"p\">[</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"p\">)]</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">duration</span><span class=\"o\">.</span><span class=\"n\">quarterLength</span>\n            <span class=\"k\">yield</span> <span class=\"p\">[</span><span class=\"n\">midis</span><span class=\"p\">,</span><span class=\"n\">durations</span><span class=\"p\">,</span><span class=\"n\">lyrics</span><span class=\"p\">]</span>\n        <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;dur_dic.json&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;w&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n            <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">dur_dic</span><span class=\"p\">))</span>\n    <span class=\"k\">return</span> <span class=\"n\">read_data</span>\n</pre></div>\n</div>\n</section>\n<section id=\"id9\">\n<h4>4. \u6210\u679c<a class=\"headerlink\" href=\"#id9\" title=\"\u6c38\u4e45\u94fe\u63a5\u81f3\u6807\u9898\">\u00b6</a></h4>\n<p>https://www.github.com/xqy2006/music_generation</p>\n</section>\n</section>\n</section>\n</section>\n",
    "title": "\u5176\u4ed6",
    "sourcename": "qianduanandhouduan/qita/contents.md.txt",
    "current_page_name": "qianduanandhouduan/qita/contents",
    "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">\u5176\u4ed6</a><ul>\n<li><a class=\"reference internal\" href=\"#github-action\">Github Action</a><ul>\n<li><a class=\"reference internal\" href=\"#sphinx\">\u4e00\u3001sphinx\u7684\u81ea\u52a8\u6784\u5efa</a><ul>\n<li><a class=\"reference internal\" href=\"#id2\">1. \u4e00\u4e9b\u8bf4\u660e</a></li>\n<li><a class=\"reference internal\" href=\"#id3\">2. \u4e00\u4e9b\u5751</a></li>\n<li><a class=\"reference internal\" href=\"#id4\">3. \u4e3b\u8981\u4ee3\u7801</a></li>\n<li><a class=\"reference internal\" href=\"#id5\">4. \u6210\u679c</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#github-actiongithub-issue\">\u4e8c\u3001\u57fa\u4e8eGithub Action\u548cGithub Issue\u7684\u97f3\u4e50\u751f\u6210</a><ul>\n<li><a class=\"reference internal\" href=\"#id6\">1. \u4e00\u4e9b\u8bf4\u660e</a></li>\n<li><a class=\"reference internal\" href=\"#id7\">2. \u4e00\u4e9b\u5751</a></li>\n<li><a class=\"reference internal\" href=\"#id8\">3. \u4e3b\u8981\u4ee3\u7801</a></li>\n<li><a class=\"reference internal\" href=\"#id9\">4. \u6210\u679c</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n",
    "page_source_suffix": ".md"
}